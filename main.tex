% LaTeX 中文简历模板（多字体&主题色/本硕博通用）
% Github: https://github.com/yanboch/LaTeX-Chinese-CV-Template
% 
% 使用方法（具体参见 README.md）：
% 1. 使用 XeLaTeX 编译
% 2. 请在 config.tex 中配置个性化内容
% 3. 模块信息请在 includefiles 文件夹中编辑
% 
% 致谢: 
% - 本模板的大框架基于
%   1. [北师大中文CV模板](https://github.com/LeyuDame/BNUCV)
%   2. [西北工业大学中文CV模板](https://www.overleaf.com/latex/templates/npu-cv/mncqzxhvfzrx)

\documentclass[11pt]{article}
\usepackage{xltxtra}
\usepackage{hyperref}
\hypersetup{hidelinks}
\usepackage{bookmark}
\urlstyle{tt}
\usepackage{multicol}
\usepackage{xcolor}
\usepackage{calc}
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{calc, backgrounds}
\usepackage{xeCJK}
\usepackage{relsize}
\usepackage{xspace}
\usepackage{fontawesome5}   
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{siunitx}
\usepackage{amssymb}
\usepackage{tabularx}
\usepackage{fancybox}
\usepackage{float}
\usepackage{xifthen}

% 注入配置文件
\input{config.tex}

% 模块标题格式
\newcommand{\moduleTitle}[2]{
    \vspace{1em}
    {\LARGE\bfseries
    {\color{\themeColor}{#1}} \hspace{0.5em} {#2}} \vspace{-0.6em}
    \par
    \vspace{0.5em}
    {\color{\themeColor}\rule{\textwidth}{0.8pt}}
    \par
}
\newcommand{\nextPage}{
    \newpage
    \ifthenelse{\boolean{\needWatermark}}{\watermark}{}
    }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 模板设置
% 参考 https://github.com/LeyuDame/BNUCV/tree/main

% 取消中文字符与数字之间的间隔
\setlength{\parindent}{0pt} % 取消全局段落缩进
\pagenumbering{gobble} % 取消页码显示
\setlist[itemize]{topsep=0em, leftmargin=*} % 增加了itemize顶部间距
\setlist[enumerate]{topsep=0em, leftmargin=*} % 增加了enumerate顶部间距
\setlist[description]{topsep=0em, leftmargin=*} % 增加了description顶部间距

% 行间距与字间距
\renewcommand{\arraystretch}{1.2} % 1.2倍表格行间距
\linespread{1.2} % 1.2倍正文行间距
\renewcommand{\CJKglue}{\hskip 0.05em} % 中文字符间距

% 页面设置
\usepackage[a4paper, % 纸张大小为A4
    left=1.2cm, right=1.2cm, top=1.8cm, bottom=1.2cm, % 页边距
    headsep=14pt, footskip=14pt % 页眉页脚间距
]{geometry}

% 页眉页脚设置
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{} % 清空默认页眉页脚
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

\newcommand{\pureColorHeader}{
    \node[anchor=north, inner sep=0pt](header) at (current page.north){
        \tikz[inner sep=0pt]{\fill[\themeColor] (0,0) rectangle (\paperwidth, 0.072\paperwidth);}
        };
}
\newcommand{\pureColorFooter}{
    \node[anchor=south, inner sep=0pt](footer) at (current page.south){
        \tikz[inner sep=0pt]{\fill[\themeColor] (0,0) rectangle (\paperwidth, 0.042\paperwidth);}
    };
}

% 页眉（校徽（左）+院系名（右））
\fancyhead[C]{
    \begin{tikzpicture}[remember picture, overlay]
        \ifthenelse{\boolean{\useDefaultTheme}}{
        \node[anchor=north, inner sep=0pt](header) at (current page.north){
            \includegraphics[width=\paperwidth]{images/header.png}
        };
        }{\pureColorHeader}
        % 插入学校logo（默认插入，需要添加学校logo的图片并在config.tex中配置\schoolLogo路径）
        \ifthenelse{\boolean{\useSchoolLogo}}{
            \node[anchor=west](school_logo) at (header.west){
                    \hspace{0.5cm}
                    \includegraphics[width=\schoolLogoWidth\textwidth]{\schoolLogo}
                };

        }{}
        % 插入学校名称（默认不插入，使用学校logo中的校名）
        \ifthenelse{\boolean{\useSchoolName}}{
            \node[anchor=west](school_name_text) at (header.west){
                \hspace{0.5cm}
                \textcolor{white}{\textbf{\schoolNameCH}}
            };}{}
        \node[anchor=east](department_name_text) at(header.east){
            \textcolor{white}{\textbf{\departmentNameCH | \departmentNameEN}}
            \hspace{0.5cm}
        };
    \end{tikzpicture}
    \vspace{-3.5em}
}

% % 页脚，联系方式
\fancyfoot[C]{
    \begin{tikzpicture}[remember picture, overlay]
        \ifthenelse{\boolean{\useDefaultTheme}}{
        \node[anchor=south, inner sep=0pt](footer) at (current page.south){
            \includegraphics[width=\paperwidth]{images/footer.png}
        };
        }{\pureColorFooter}
        \node[anchor=center] at(footer.center){\contact};
    \end{tikzpicture}
}

\thispagestyle{fancy}

% 自定义字体，详见 README.md -> 自定义字体
\ifthenelse{\boolean{\useDefaultFont}}{}
{
    % 英文字体
    \setmainfont[
        Path={\fontPath},
        Extension={\fontFileTypeEN},
        BoldFont={\fontBoldFontEN},
    ]{\customFontFamilyEN}
    % 中文字体
    \setCJKmainfont[
        Path={\fontPath},
        Extension={\fontFileTypeCH},
        BoldFont={\fontBoldFontCH},
    ]{\customFontFamilyCH}
}
%%%%%%%%%%%%%%%%%%%%
% 个人信息
%%%%%%%%%%%%%%%%%%%%
% 联系方式
\newcommand{\contact}{
    % 根据个人喜好选择页脚的字号
    % \small % 小
    % \footnotesize % 更小
    \scriptsize % 再小一号

    \textcolor{white}{
        % 邮箱
        \ifthenelse{\boolean{\needEmail}}{
            \faEnvelope \quad \href{mailto:\yourEmail}{\yourEmail}
        }{} 
        \hspace{4em}
        % 手机号
        \ifthenelse{ \boolean{\needPhone}}{
            \faPhone \quad \yourPhone
        }{}
        \hspace{4em}
        % GitHub
        \ifthenelse{ \boolean{\needGithub}}{
            \faGithub \quad \href{https://github.com/\yourGithub}{\yourGithub}
        }{}
        \hspace{4em}
        % 微信
        \ifthenelse{ \boolean{\needWechat}}{
            \faWeixin \quad \yourWechat
        }{}
    }
}

% 水印
\newcommand{\watermark}{
    \begin{tikzpicture}[remember picture, overlay]
        \node[opacity=\watermarkOpacity] at(current page.center){
            \includegraphics[width=\watermarkSize\paperwidth, keepaspectratio]{\watermarkImage}
        };
    \end{tikzpicture}
}

\begin{document}
\ifthenelse{\boolean{\needWatermark}}{\watermark}{}

% 个人信息
\vspace{-1.2em}
\newcommand{\infoGap}{\ \ \ \ \ \ \ \ }
\ifthenelse{\boolean{\needPersonalInformation}}{
    \ifthenelse{\boolean{\needAvatar}}{
        \begin{figure}[h]
            \begin{minipage}{\PersonalInformationWidth\textwidth}
                \moduleTitle{\PersonalInformationIcon}{\PersonalInformationTitle}
                \begin{tabularx}{\linewidth}{p{\widthof{四个汉字:}}Xp{\widthof{四个汉字:}}X}
                    \input{includefiles/personal_information.tex}
                \end{tabularx}
            \end{minipage}
            \hspace{2em}
            \begin{minipage}{\AvatarWidth\textwidth}
                \setlength{\fboxsep}{0pt}
                \doublebox{\includegraphics[width=0.99\textwidth]{\AvatarImage}}
            \end{minipage}
        \end{figure}
    }{
        \begin{figure}[h]
                \moduleTitle{\PersonalInformationIcon}{\PersonalInformationTitle}
                \begin{tabularx}{\linewidth}{p{\widthof{四个汉字:}}Xp{\widthof{四个汉字:}}X}
                    \input{includefiles/personal_information.tex}
                \end{tabularx}
            \hspace{2em}
        \end{figure}
    }
}

\vspace{-1em}

% 教育背景
\ifthenelse{\boolean{\needEducation}}{
    \newcommand{\addEducation}[6]{
        {\large \textbf{#1}}，{#2} \hfill {#3} \\
        \underline{#4}，专业：{#5} \hfill {#6}
        \par \vspace{0.8em}
    }
    \newcommand{\addCourse}[1]{\vspace{-0.8em} #1 \par \vspace{0.8em}}
    \newcommand{\addEducationDescription}[1]{\vspace{-0.5em} #1 \par \vspace{0.8em}}
    \moduleTitle{\EducationIcon}{\EducationTitle}
    \input{includefiles/education.tex}
    \par
}{}

% 科研成果
\ifthenelse{\boolean{\needPublication}}{
    \newcommand{\addPublication}[5]{
        #1\\
        #2 \hfill 
        \textbf{#3}（#4）\underline{#5} 
        \par \vspace{0.8em}
    }
    \newcommand{\addPublicationDescription}[1]{\par\vspace{-0.5em}#1\vspace{0.8em}}
    \moduleTitle{\PublicationIcon}{\PublicationTitle}
    \input{includefiles/publication.tex}
    \par
}{}

% 项目经历\科研经历\项目与教学（标题请根据需要修改）
\ifthenelse{\boolean{\needProjects}}{
    \newcommand{\addProject}[4]{
        {\large{\textbf{#1}}} \hfill {#2}\\
        \textbf{#3} \hfill #4
        \par \vspace{0.8em}
    }
    \newcommand{\addProjectDescription}[1]{\par\vspace{-0.5em}#1\par\vspace{0.8em}}
    \moduleTitle{\ProjectsIcon}{\ProjectsTitle} 
    \input{includefiles/projects.tex}
    \par
}{}

\ifthenelse{\boolean{\needSkills}}{
    \newcommand{\addSkill}[1]{\item #1}
    \moduleTitle{\SkillsIcon}{\SkillsTitle}
    \begin{itemize}
        \input{includefiles/skills.tex}
    \end{itemize}
    \par
}{}

% 竞赛经历
\ifthenelse{\boolean{\needCompetitions}}{
    \moduleTitle{\CompetitionsIcon}{\CompetitionsTitle}
    \newcommand{\addCompetition}[4]{
        \textbf{#1} & #2 & #3 & #4 \\
    }
    \begin{table}[h!]
        \begin{tabularx}{\textwidth}{Xp{\widthof{xxxxxxxxxx}}p{\widthof{xxxxxxxxxxxxxxx}}p{\widthof{xxxxxxxxxxx}}}
            \input{includefiles/competitions.tex}
        \end{tabularx}
    \end{table}
    \par \vspace{-2em}
}{}

% 所获荣誉
\ifthenelse{\boolean{\needHonors}}{
    \moduleTitle{\HonorsIcon}{\HonorsTitle}
    \newcommand{\addHonor}[1]{\item #1}
    \begin{multicols}{2}
        \begin{itemize}
            \input{includefiles/honor.tex}
        \end{itemize}
    \end{multicols}
}{}

% 其他
\ifthenelse{\boolean{\needOthers}}{
    \moduleTitle{\OthersIcon}{\OthersTitle}
    \newcommand{\addOther}[1]{\item #1}
        \begin{itemize}
            \input{includefiles/others.tex}
        \end{itemize}
        \par
}{}

\end{document}
